# Timeline Fixes - –ü–æ–ª–Ω—ã–π –ß–µ–∫-–ª–∏—Å—Ç

## üéØ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### A. ‚úÖ "–°–æ—Å–µ–¥–Ω—è—è –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è" (–†–ï–®–ï–ù–û)

**Root Cause:**
- Wrapper `<div>` —Å `pointer-events: auto` –∏ `transform: translate(-50%, -50%)` —Å–æ–∑–¥–∞–≤–∞–ª —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π hitbox
- –°–æ–±—ã—Ç–∏—è `onMouseEnter`/`onMouseLeave` –Ω–∞ wrapper –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–ª–∏—Å—å —Å–æ—Å–µ–¥–Ω–∏–º–∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏

**Fix:**
```typescript
// –î–û (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
<div 
  className="absolute pointer-events-auto" // ‚Üê –ü–†–û–ë–õ–ï–ú–ê!
  onMouseEnter={() => onHover?.(note.id)}
>
  <div className="card">...</div>
</div>

// –ü–û–°–õ–ï (–ü–†–ê–í–ò–õ–¨–ù–û):
<div className="absolute pointer-events-none"> {/* wrapper –Ω–µ –ª–æ–≤–∏—Ç —Å–æ–±—ã—Ç–∏—è */}
  <div 
    className="card pointer-events-auto" {/* —Ç–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–∫–∞ */}
    onPointerEnter={() => onHover?.(note.id)} {/* pointer events */}
  >
    ...
  </div>
</div>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Hover –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ —Ä–µ–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º
- ‚úÖ –ù–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ —Å–æ–±—ã—Ç–∏–π —Å–æ—Å–µ–¥—è–º–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `onPointerEnter/Leave` (–ª—É—á—à–µ –¥–ª—è touch/mouse)

---

### B. ‚úÖ Pixel Snapping (—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ "–∫—Ä–∏–≤–∏–∑–Ω—ã")

**Root Cause:**
- –î—Ä–æ–±–Ω—ã–µ –ø–∏–∫—Å–µ–ª–∏ (subpixel positioning)
- `Math.round()` –±–µ–∑ —É—á—ë—Ç–∞ `devicePixelRatio`
- Transform –±–µ–∑ —Å–Ω–∞–ø–∞

**Fix:**
```typescript
// –ù–æ–≤–∞—è —É—Ç–∏–ª–∏—Ç–∞: src/components/timeline/utils/pixelSnap.ts
const dpr = window.devicePixelRatio || 1;

export function snap(value: number): number {
  return Math.round(value * dpr) / dpr;
}

export function snapTransform(x: number, y: number): string {
  return `translate3d(${snap(x)}px, ${snap(y)}px, 0px)`;
}
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ:**
- ‚úÖ –í—Å–µ `left`, `top`, `width`, `height` ‚Üí `snap()`
- ‚úÖ Transform –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ‚Üí `snapTransform()`
- ‚úÖ Tick marks ‚Üí `snap()` + `hairline` offset –¥–ª—è 1px –ª–∏–Ω–∏–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ß–µ—Ç–∫–∏–µ –ª–∏–Ω–∏–∏ –±–µ–∑ blur
- ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –Ω–∞ Retina (2x/3x DPR)
- ‚úÖ –ù–µ—Ç –¥—Ä–æ–∂–∞–Ω–∏—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ

---

### C. ‚úÖ Z-Index –°–∏—Å—Ç–µ–º–∞ (—á—ë—Ç–∫–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è)

**Root Cause:**
- –ù–µ—è–≤–Ω—ã–π z-index —á–µ—Ä–µ–∑ Tailwind –∫–ª–∞—Å—Å—ã
- –ü–µ—Ä–µ—Ö–æ–¥—ã –Ω–∞ z-index —Å–æ–∑–¥–∞–≤–∞–ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∏

**Fix:**
```typescript
// –ß–µ—Ç–∫–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è:
let zIndex = 0;          // –±–∞–∑–æ–≤—ã–π
if (isRelated) zIndex = 10;  // —Å–≤—è–∑–∞–Ω–Ω—ã–µ
if (isHovered) zIndex = 15;  // hover –≤—ã—à–µ
if (isFocused) zIndex = 20;  // focus - –Ω–∞–∏–≤—ã—Å—à–∏–π

// Background/Track = 0 (pointer-events: none)
// Connection Lines = 5 (pointer-events: none)
// Cards = 10-20 (pointer-events: auto)
// Focus overlay = 10
// Navigation = 30
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –Ω–∞–ª–æ–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫
- ‚úÖ Hover –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º
- ‚úÖ Focus –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–æ—Å–µ–¥—è–º–∏

---

### D. ‚úÖ Pointer Events - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –°–ª–æ—ë–≤

**Fix:**
```typescript
// LAYER 0: Background (pointer-events: none)
<div className="absolute inset-0 pointer-events-none">
  <TimelineTrackV2 />
</div>

// LAYER 1: Connection Lines (pointer-events: none)
<div className="absolute inset-0 pointer-events-none" style={{ zIndex: 5 }}>
  <ConnectionLines />
</div>

// LAYER 2: Cards (pointer-events: auto –Ω–∞ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ)
{cards.map(card => (
  <TimelineCardV2 /> {/* –≤–Ω—É—Ç—Ä–∏: pointer-events: auto */}
))}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –ª–æ–≤—è—Ç –∫–ª–∏–∫–∏
- ‚úÖ –¢–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã
- ‚úÖ –ù–µ—Ç "–º—ë—Ä—Ç–≤—ã—Ö –∑–æ–Ω"

---

### E. ‚úÖ Focus-Visible (accessibility)

**Fix –≤ `src/index.css`:**
```css
/* –£–±–∏—Ä–∞–µ–º focus –ø—Ä–∏ –∫–ª–∏–∫–µ –º—ã—à—å—é */
*:focus:not(:focus-visible) {
  outline: none;
  box-shadow: none;
}

/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ Tab */
*:focus-visible {
  @apply outline-none ring-2 ring-primary;
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ö–ª–∏–∫ –º—ã—à—å—é –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç focus outline
- ‚úÖ Tab –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (accessibility)
- ‚úÖ –ù–µ—Ç "—Å–∏–Ω–∏—Ö –æ–±–≤–æ–¥–æ–∫" –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞

---

### F. ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –Ø—Å–Ω–æ—Å—Ç—å (LOD + –±–µ–∑ blur)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. **LOD (Level of Detail):**
   - –ë–∞–∑–æ–≤—ã–π –≤–∏–¥: —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ + –≥–æ–¥
   - Hover: + –ø—Ä–µ–≤—å—é —Ç–µ–∫—Å—Ç–∞
   - Focus: + –¥–æ–º–µ–Ω—ã

2. **–£–±—Ä–∞–Ω blur:**
   ```typescript
   // –î–û: isDimmed && 'blur-[1px]'
   // –ü–û–°–õ–ï: opacity —Ç–æ–ª—å–∫–æ
   const opacity = isDimmed ? 0.3 : 1.0;
   ```

3. **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã:**
   ```typescript
   const CARD_WIDTH = 320;  // –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è!
   const CARD_HEIGHT = 160;
   // –ù–µ—Ç scale, –Ω–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–π "–≥—Ä—è–∑–∏"
- ‚úÖ –ß—ë—Ç–∫–∏–µ –∫—Ä–∞—è –∫–∞—Ä—Ç–æ—á–µ–∫
- ‚úÖ –ß–∏—Ç–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç

---

## üìã –†–£–ß–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê (Quality Assurance)

### 1. Hover Behaviour
- [ ] –ù–∞–≤–µ—Å—Ç–∏ –∫—É—Ä—Å–æ—Ä –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É ‚Üí **—Ç–æ–ª—å–∫–æ –æ–Ω–∞** –ø–æ–ª—É—á–∞–µ—Ç –æ–±–≤–æ–¥–∫—É
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫—É—Ä—Å–æ—Ä –Ω–∞ —Å–æ—Å–µ–¥–Ω—é—é ‚Üí –æ–±–≤–æ–¥–∫–∞ **–ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
- [ ] Hover –Ω–∞ –ø—É—Å—Ç–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ ‚Üí **–Ω–µ—Ç –æ–±–≤–æ–¥–∫–∏**
- [ ] –ë—ã—Å—Ç—Ä–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞ ‚Üí **–Ω–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤/–∑–∞–¥–µ—Ä–∂–µ–∫**

### 2. Click Behaviour
- [ ] –ö–ª–∏–∫ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É ‚Üí **focus mode**, –∫–∞—Ä—Ç–æ—á–∫–∞ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
- [ ] –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∫–ª–∏–∫ ‚Üí **–≤—ã—Ö–æ–¥ –∏–∑ focus mode**
- [ ] –ü–æ—Å–ª–µ –∫–ª–∏–∫–∞ **–Ω–µ—Ç —Å–∏–Ω–µ–π –æ–±–≤–æ–¥–∫–∏** (focus-visible)
- [ ] –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–¥—Å–≤–µ—á–µ–Ω—ã **–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**

### 3. Keyboard Navigation
- [ ] Tab ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
- [ ] Enter/Space ‚Üí –∫–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ
- [ ] –í focus mode: `‚Üê/‚Üí` ‚Üí –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å–æ—Å–µ–¥–Ω–∏–º
- [ ] Escape ‚Üí –≤—ã—Ö–æ–¥ –∏–∑ focus mode
- [ ] Focus-visible outline **–≤–∏–¥–µ–Ω** –ø—Ä–∏ Tab

### 4. Visual Alignment (pixel-perfect)
- [ ] –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è ruler **—Ä–æ–≤–Ω–∞—è** (–Ω–µ –¥—Ä–æ–∂–∏—Ç)
- [ ] Tick marks **—á—ë—Ç–∫–∏–µ** (–Ω–µ —Ä–∞–∑–º—ã—Ç—ã–µ)
- [ ] –ö–∞—Ä—Ç–æ—á–∫–∏ **–≤—ã—Ä–æ–≤–Ω–µ–Ω—ã** –ø–æ —Å–µ—Ç–∫–µ
- [ ] –ü—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ **–Ω–µ—Ç jitter** (–¥—Ä–æ–∂–∞–Ω–∏—è)
- [ ] –ù–∞ Retina –¥–∏—Å–ø–ª–µ–µ (2x/3x) –ª–∏–Ω–∏–∏ **1px —á—ë—Ç–∫–∏–µ**

### 5. Scroll Behaviour
- [ ] –ö–æ–ª—ë—Å–∏–∫–æ –º—ã—à–∏ ‚Üí **–ø–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª**
- [ ] Snap points —Ä–∞–±–æ—Ç–∞—é—Ç (–ø—Ä–∏—Ç—è–≥–∏–≤–∞–Ω–∏–µ –∫ –∑–Ω–∞—á–∏–º—ã–º —Ç–æ—á–∫–∞–º)
- [ ] Indicator —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ **—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω**
- [ ] URL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (year + zoom)

### 6. Zoom Levels
- [ ] Zoom Out ‚Üí –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ, —Ç–∏–∫–∏ —Ä–µ–¥–∫–∏–µ
- [ ] Zoom Mid ‚Üí —Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏
- [ ] Zoom In ‚Üí –±–æ–ª—å—à–µ —Ç–µ–∫—Å—Ç–∞, —á–∞—Å—Ç—ã–µ —Ç–∏–∫–∏
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ zoom **–Ω–µ –ª–æ–º–∞–µ—Ç layout**

### 7. Focus Mode
- [ ] –§–æ–Ω –∑–∞—Ç–µ–º–Ω—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Focused –∫–∞—Ä—Ç–æ—á–∫–∞ **—è—Ä—á–µ** –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
- [ ] Related –∫–∞—Ä—Ç–æ—á–∫–∏ **–ø–æ–¥—Å–≤–µ—á–µ–Ω—ã —Å–ª–µ–≥–∫–∞**
- [ ] –ù–µ-related –∫–∞—Ä—Ç–æ—á–∫–∏ **–∑–∞—Ç–µ–º–Ω–µ–Ω—ã**
- [ ] Connection lines **–≤–∏–¥–Ω—ã** (–º–µ–∂–¥—É focused –∏ related)
- [ ] Connection lines **–Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç –∫–ª–∏–∫–∏**

### 8. Edge Cases
- [ ] –ú–Ω–æ–≥–æ –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –æ–¥–Ω–æ–º –≥–æ–¥—É ‚Üí **lanes —Ä–∞–±–æ—Ç–∞—é—Ç** (–Ω–µ—Ç overlap)
- [ ] –ö–∞—Ä—Ç–æ—á–∫–∞ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ timeline ‚Üí **–≤–∏–¥–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
- [ ] Resize –æ–∫–Ω–∞ ‚Üí –≥–µ–æ–º–µ—Ç—Ä–∏—è **–ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è**
- [ ] –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º (touch) ‚Üí hover —á–µ—Ä–µ–∑ tap —Ä–∞–±–æ—Ç–∞–µ—Ç

### 9. Performance
- [ ] 60 FPS –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ DevTools)
- [ ] –ù–µ—Ç layout thrashing (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å Performance tab)
- [ ] –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–∞—Ä—Ç–æ—á–∫–∏ –≤–Ω–µ —ç–∫—Ä–∞–Ω–∞ –Ω–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è)
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–ª–∞–≤–Ω—ã–µ

### 10. Different Displays
- [ ] **1x DPR** (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä): –ª–∏–Ω–∏–∏ —á—ë—Ç–∫–∏–µ
- [ ] **2x DPR** (Retina): –ª–∏–Ω–∏–∏ –Ω–µ —Ä–∞–∑–º—ã—Ç—ã–µ
- [ ] **3x DPR** (—Ç–µ–ª–µ—Ñ–æ–Ω—ã): –≤—Å—ë —á–∏—Ç–∞–µ–º–æ
- [ ] **4K –º–æ–Ω–∏—Ç–æ—Ä**: —Ç–µ–∫—Å—Ç –Ω–µ –º–µ–ª–∫–∏–π

---

## üõ† –ö–ê–ö –î–ï–ë–ê–ñ–ò–¢–¨

### –ü—Ä–æ–±–ª–µ–º–∞: "–°–æ—Å–µ–¥–Ω—è—è –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç hover"

**Debug steps:**
1. –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Elements
2. –ù–∞–≤–µ—Å—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   ```
   $0.className // –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å "pointer-events-auto"
   $0.parentElement.className // –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å "pointer-events-none"
   ```
4. –ï—Å–ª–∏ wrapper –ª–æ–≤–∏—Ç —Å–æ–±—ã—Ç–∏—è ‚Üí **–Ω–∞–π–¥–∏ –∏ —É–±–µ—Ä–∏ pointer-events-auto**

### –ü—Ä–æ–±–ª–µ–º–∞: "–õ–∏–Ω–∏—è ruler –¥—Ä–æ–∂–∏—Ç"

**Debug steps:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DPR:
   ```js
   window.devicePixelRatio // –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 1, 2, –∏–ª–∏ 3
   ```
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–µ:
   ```
   left: 123.5px ‚Üê BAD (–¥—Ä–æ–±–Ω–æ–µ)
   left: 124px   ‚Üê GOOD
   ```
3. –ï—Å–ª–∏ –¥—Ä–æ–±–Ω–æ–µ ‚Üí **–¥–æ–±–∞–≤—å snap() –≤–æ–∫—Ä—É–≥ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è**

### –ü—Ä–æ–±–ª–µ–º–∞: "Focus outline –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞ –º—ã—à—å—é"

**Debug steps:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CSS:
   ```css
   *:focus:not(:focus-visible) {
     outline: none; /* –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å */
   }
   ```
2. –ï—Å–ª–∏ outline –µ—Å—Ç—å ‚Üí –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ global CSS –∑–∞–≥—Ä—É–∂–µ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞: "–ö–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è"

**Debug steps:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å z-index –≤ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–µ:
   ```
   Hovered card: z-index: 15 ‚Üê –æ–∂–∏–¥–∞–µ—Ç—Å—è
   Focused card: z-index: 20 ‚Üê –æ–∂–∏–¥–∞–µ—Ç—Å—è
   ```
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ transition –Ω–∞ z-index –æ—Ç–∫–ª—é—á–µ–Ω:
   ```css
   transition: opacity 200ms, z-index 0ms; /* z-index –±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏! */
   ```

---

## üì¶ –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `src/components/timeline/utils/pixelSnap.ts` - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è pixel-perfect

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `src/components/timeline/components/TimelineCardV2.tsx` - pointer events fix + snap
- ‚úÖ `src/components/timeline/components/TimelineTrackV2.tsx` - snap –¥–ª—è –≤—Å–µ—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- ‚úÖ `src/components/timeline/TimeRulerV2.tsx` - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—ë–≤
- ‚úÖ `src/components/timeline/ConnectionLines.tsx` - z-index + pointer-events: none
- ‚úÖ `src/index.css` - focus-visible fix + grain texture

### –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- `src/components/timeline/core/timelineMath.ts` (—É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)
- `src/components/timeline/hooks/*` (—É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ)

---

## ‚ú® –ò–¢–û–ì–û

**–ë—ã–ª–æ:**
- ‚ùå –°–æ—Å–µ–¥–Ω—è—è –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç hover
- ‚ùå –õ–∏–Ω–∏–∏ "–∫—Ä–∏–≤—ã–µ", –¥—Ä–æ–∂–∞—Ç
- ‚ùå –°–∏–Ω—è—è –æ–±–≤–æ–¥–∫–∞ –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞ –º—ã—à—å—é
- ‚ùå Blur —Å–æ–∑–¥–∞—ë—Ç –≤–∏–∑—É–∞–ª—å–Ω—É—é –≥—Ä—è–∑—å

**–°—Ç–∞–ª–æ:**
- ‚úÖ Hover —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º
- ‚úÖ Pixel-perfect –ª–∏–Ω–∏–∏ –∏ –∫–∞—Ä—Ç–æ—á–∫–∏
- ‚úÖ Focus-visible —Ç–æ–ª—å–∫–æ –ø—Ä–∏ Tab
- ‚úÖ –ß—ë—Ç–∫–∞—è –≤–∏–∑—É–∞–ª—å–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—ë–≤ (background / lines / cards)
- ‚úÖ –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ pointer events
- ‚úÖ –ß—ë—Ç–∫–∞—è z-index –∏–µ—Ä–∞—Ä—Ö–∏—è
- ‚úÖ –í—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–Ω–∞–ø–Ω—É—Ç—ã –∫ device pixels

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ–π—Ç–∏ —á–µ–∫-–ª–∏—Å—Ç –≤—Ä—É—á–Ω—É—é! üöÄ

